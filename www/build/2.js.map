{"version":3,"sources":["../../src/pages/local/local-game.module.ts","../../src/shared/shared.module.ts","../../src/shared/game-board/game-board.comp.ts","../../src/shared/player-header/player-header.comp.ts","../../src/pages/local/local-game.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LocalGamePage } from '@pages/local/local-game';\nimport { SharedModule } from '@shared/shared.module';\n\n/**\n * IMPORTANT : register the name literal in app/LazyPages.ts so we are always using references to the string literal lazy names\n * the lazy name is the class name unless it is overridden.\n */\n\n@NgModule({\n  declarations: [\n    LocalGamePage\n  ],\n  imports: [\n    IonicPageModule.forChild(LocalGamePage),\n    SharedModule\n  ],\n})\nexport class LocalGameModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/local/local-game.module.ts","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {IonicModule} from 'ionic-angular';\nimport {GameBoardComponent} from '@shared/game-board/game-board.comp';\nimport {PlayerHeaderComponent} from '@shared/player-header/player-header.comp';\n\n@NgModule({\n  declarations: [\n    GameBoardComponent,\n    PlayerHeaderComponent,\n  ],\n  providers: [],\n  imports: [\n    CommonModule,\n    IonicModule,\n  ],\n  exports: [\n    CommonModule,\n    IonicModule,\n    GameBoardComponent,\n    PlayerHeaderComponent\n  ]\n})\nexport class SharedModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/shared.module.ts","import {Component, Input, Output, EventEmitter, ChangeDetectionStrategy} from '@angular/core';\nimport { BoardState, TurnEvent, Move } from '@shared/interfaces';\nimport { now } from 'lodash/fp';\n\n@Component({\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  selector: 'game-board',\n  templateUrl: './game-board.html'\n})\nexport class GameBoardComponent {\n  @Input() turn: number;\n  @Input() boardState: BoardState;\n  @Output() turnEvents = new EventEmitter<TurnEvent>();\n\n  constructor() {\n    this.boardState = {\n      UL: null, UM: null, UR: null,\n      ML: null, MM: null, MR: null,\n      LL: null, LM: null, LR: null\n    };\n  }\n\n  playerAction(move: Move) {\n    this.boardState[move] = this.turn;\n    this.turnEvents.emit({move: move, turn: this.turn, time: now()});\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/game-board/game-board.comp.ts","import {Component, Input, ChangeDetectionStrategy} from '@angular/core';\nimport { GamePlayers } from '@shared/interfaces';\nimport {get} from 'lodash';\n\n@Component({\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  selector: 'player-header',\n  templateUrl: './player-header.html'\n})\nexport class PlayerHeaderComponent {\n  player0 = '';\n  player1 = '';\n  @Input() turn: number;\n  @Input() set players(players: GamePlayers) {\n    this.player0 = get(players,'[0].name','');\n    this.player1 = get(players,'[1].name','');\n  };\n\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/player-header/player-header.comp.ts","import { Component } from '@angular/core';\nimport {IonicPage, AlertController } from 'ionic-angular';\nimport {Game, TurnEvent, BoardState, GamePlayers, Player } from '@shared/interfaces';\nimport { get } from 'lodash';\nimport { DomainWorker } from '@singleton/domain.worker';\nimport { Either } from 'monet';\n\n@IonicPage()\n@Component({\n  selector: 'page-local-game',\n  templateUrl: 'local-game.html'\n})\nexport class LocalGamePage {\n  players: GamePlayers;\n\n  activeTurn = 0;\n  boardState: BoardState = {\n    UL: null, UM: null, UR: null,\n    ML: null, MM: null, MR: null,\n    LL: null, LM: null, LR: null\n  };\n  game: Game;\n\n  constructor(private alertCtrl: AlertController, private domainWorker: DomainWorker) {\n\n  }\n\n  ionViewDidLoad() {\n    this.createNewGame()\n  }\n\n  createNewGame() {\n    this.domainWorker.startGame(true).fork(\n      e => console.log(e),\n      game => {\n        this.game = game;\n        this.activeTurn = get(this, 'game.activeTurn',0);\n        this.boardState = this.domainWorker.newBoardState(this.game);\n        this.players = game.players;\n      });\n    //create a game record in the game db, mark the game is active\n    //create write sequence record in\n  }\n\n  promptForNewGame() {\n    this.alertCtrl.create({\n      title: 'Start a new game?',\n      buttons: [\n        {text: 'Cancel',role: 'cancel',handler: () => null},\n        {text: 'New Game', handler: () => this.createNewGame()}]\n    }).present()\n  }\n\n  processTurn(turn: TurnEvent) {\n    //make other players turn active;\n    this.activeTurn = this.activeTurn === 0 ? 1 : 0;\n\n    //generate a new game state\n    this.game = this.domainWorker.updateGameSequence(this.game, turn)\n\n    //generate a new board state for the game-board component\n    this.boardState = this.domainWorker.newBoardState(this.game);\n\n    //check if there is a winner\n    const winner = this.domainWorker.determineWinner(this.game.sequence, this.game.players);\n\n    (get(winner, 'name') === 'Scratch Game!' ? Either.Left(this.endGameAlert(winner.name)) : Either.Right(winner))\n      .flatMap((w: Player) => {\n        w ? this.endGameAlert(w.name + ' is the winner!') : null;\n        return Either.Left(null);\n      });\n  }\n\n  endGameAlert(msg: string) {\n    this.alertCtrl.create({\n      title: msg,\n      buttons: [{text: 'Play Again',handler: () => this.createNewGame()}]\n    }).present();\n    return null;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/local/local-game.ts"],"sourceRoot":""}